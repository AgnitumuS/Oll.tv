# Интерфейс взаимодействия оператора с порталом *oll.tv* (ispAPI v.2.1.0)

## Термины и понятия
Сервер — ресурс на котором размещен портал *oll.tv*.<br />
Оператор (провайдер) — телеком-оператор, с которым есть договорные отношения.<br />
Подписка типа бандл (Bundle) – подписка, включаемая оператором пользователю.<br />
Подписка типа *VAS* – подписка, которую пользователь покупает самостоятельно через свой личный кабинет на портале *oll.tv*.<br />
Подписка для доступа к основной услуге — подписка типа бандл, предоставляющая доступ к просмотру контента на портале *oll.tv*.<br />
Подписка для доступа с доп. экрана — подписка типа бандл, не дающая доступ к контенту, а предоставляющая пользователю возможность привязать дополнительное устройство; активация возможна только после подписки на основную услугу и одновременно может быть активировано несколько подписок данного типа.<br/>

## Общая информация
Методы, возвращающие блоки данных, вызываются при помощи *HTTP GET* запросов на сервер. Сервер, в свою очередь, возвращает данные в виде *JSON*.<br />
Методы, передающие данные от клиента к серверу, вызываются при помощи *HTTP POST*, данные в *POST* запросе передаются в прямом виде, ответ же кодируется в *JSON*.<br />

## Логика взаимодействия с сервером
Корневая папка для запросов на сервер находится по адресу: [ispAPI](http://oll.tv/ispAPI/).<br/>
Для тестирования используется сервер *dev.oll.tv*. Доступ на него возможен только для предоставленных ip-адресов.<br />
Первый запрос должен прийти на метод авторизации. Используя логин и пароль для *ispAPI*, клиентское приложение получает уникальный хеш, который должно передавать при последующих обращениях к серверу.<br />
<br />
**Пример:**<br />
*Запрос:*

```
POST /ispAPI/auth2/ 
login=isp#1&password=password#1
```

*Ответ:*

```
{
    "status": "0",
    "hash": "o32xf3oddksk33"
}
```

После успешной авторизации доступны остальные методы *API*, с обязательной передачей хеша, используя ключ **"hash"**, например:<br/>

```
GET /ispAPI/emailExists?hash=o32xf3oddksk33
```

## Формат ответа
Ответ представляет собой объект в *JSON*, в котором обязательно присутствует элемент **status**, значение которого в случае успешного выполнения запроса равно нулю, а в случае ошибки — коду ошибки. Второй элемент в общем случае — **data** (где это не так — указано отдельно). Ответ, также, может содержать поле **warnings** со списком предупреждений (например, об отсутствии в запросе каких-либо полей или неправильном их значении).<br />
Если же какой-либо метод не может быть выполнен по той или иной причине сервер возвращает объект в *JSON* с полями **status** и **message**, где **message** – описание ошибки (перечень возможных ошибок описан в одноимённом разделе данной документации). 
В случае, если хеш ещё не выдан или не может быть верифицирован, элемент **status** дублируется элементом *id* для совместимости с *ispAPI версии 1.х.х.*<br />

## Список методов

### Метод авторизации
<a name="func-auth">auth2</a> - **http://oll.tv/ispAPI/auth2** <br/>
Принимает два параметра, *login* и *password*.<br />
Возвращает хеш (элемент объекта *hash*).<br />
Возможные коды ошибок: [**111**](#error-111), [**112**](#error-112), [**113**](#error-113).<br />

#### **1. Работа с пользователями**
##### *1.1. Метод проверки существования пользователя с данным email в БД oll.tv*
<a name="func-emailExists">emailExists</a> - **http://oll.tv/ispAPI/emailExists** <br/>
Принимает один параметр – *email*.<br/>
Возвращает 1 если *email* существует в базе, и 0 – если нет.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**201**](#error-201).<br/>
<br/>
##### *1.2. Метод проверки существования провайдерского аккаунта в БД oll.tv*
<a name="func-accountExists">accountExists</a> - **http://oll.tv/ispAPI/accountExists** <br/>
Принимает один параметр – account – аккаунт абонента на стороне провайдера.<br/>
Если такой абонент уже есть у нас в базе – будет возвращён объект с информацией по этому абоненту, в противном случае будет возвращен 0.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200).<br/>
<br/>
##### *1.3. Метод добавления (регистрации) нового пользователя в БД oll.tv*
<a name="func-addUser">addUser</a> - **http://oll.tv/ispAPI/addUser** <br/>
Принимает следующие параметры, из которых первые два – обязательны:<br/>

<pre>
    <b>email</b>
    <b>account</b>
    <b>birth_date</b> (допускаются форматы YYYY-MM-DD или DD.MM.YYYY)
    <b>gender</b> (значения M или F, по-умолчанию: M)
    <b>firstname</b> (по-умолчанию: «Гость»/«Гостья»)
    <b>password</b> (если не задан — сгенерируется автоматически)
    <b>lastname</b>
    <b>phone</b> (пример: 0501234567)
    <b>region</b>
    <b>receive_news</b> (значения 1 или 0, по-умолчанию: 1)
    <b>send_registration_email</b> (слать ли пользователю сообщение о регистрации, значения 1 или 0, по-умолчанию: 1)
    <b>index</b> (почтовый индекс или другой идентификатор региональной привязки абонента)
</pre>

Возвращает ID созданного пользователя.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**115**](#error-115), [**116**](#error-116), [**120**](#error-120), [**200**](#error-200), [**301**](#error-301).<br/>
<br/>
##### *1.4. Метод получения списка пользователей*
<a name="func-getUserList">getUserList</a> - **http://oll.tv/ispAPI/getUserList** <br/>
Принимает следующие необязательные параметры:<br/>

<pre>
    <b>offset</b>
    <b>limit</b> &mdash; (не больше 1000, по умолчанию равно 1000)
</pre>

Метод возвращает список пользователей oll.tv (с подробной информацией), которые "привязаны" к провайдеру.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200).<br/>
<br/>
##### *1.5. Метод установки/изменения провайдерского аккаунта и привязывания пользователя к провайдеру*
<a name="func-changeAccount">changeAccount</a> - **http://oll.tv/ispAPI/changeAccount** <br/>
После выполнения данного метода, если пользователь не был ранее привязан к провайдеру, пользователю на почту будет выслано письмо с уведомлением о том, что он будет привязан к провайдеру, и ссылкой, перейдя по которой, он завершит процедуру привязки к провайдеру.<br/>
Принимает следующие обязательные параметры:<br/>

<pre>
    <b>email</b> &mdash; кому изменить
    <b>account</b> &mdash; новое значение
</pre>

Не возвращает ничего кроме статуса.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**201**](#error-201), [**404**](#error-404), [**505**](#error-505).<br/>
<br/>
##### *1.6. Метод отвязки пользователя от оператора*
<a name="func-deleteAccount">deleteAccount</a> - **http://oll.tv/ispAPI/deleteAccount** <br/>
Принимает один обязательный параметр:<br/>
    
<pre>
    <b>account</b> или <b>email</b> или <b>id</b> или <b>ds_account</b>
</pre>

<br/>
Не возвращает ничего кроме статуса.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**404**](#error-404), [**505**](#error-505).<br/>
<br/>
##### *1.7. Метод изменения email*
<a name="func-changeEmail">changeEmail</a> - **http://oll.tv/ispAPI/changeEmail** <br/>
Провайдер может менять email только привязанным к нему пользователям. Метод принимает два параметра:<br/>

<pre>
    <b>email</b> &mdash; кому изменить
    <b>new_email</b> &mdash; новый адрес
</pre>

Не возвращает ничего кроме статуса.<br/>
<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**201**](#error-201), [**205**](#error-205), [**404**](#error-404), [**505**](#error-505).<br/>
<br/>
##### *1.8. Метод получения данных о пользователе*
<a name="func-getUserInfo">getUserInfo</a> - **http://oll.tv/ispAPI/getUserInfo** <br/>
Принимает один обязательный параметр:<br/>

<pre>
    <b>account</b> или <b>email</b> или <b>id</b> или <b>ds_account</b>
</pre>

Возвращает объект с данными:

<pre>
    <b>email</b>
    <b>account</b>
    <b>registration_date</b>
    <b>bought_subs</b> (массив с купленными подписками типа бандл, где каждая подписка представлена объектом с необходимой информацией).
    <b>alt_mail</b> (в случае если аккаунт от укртелекома)
</pre>

Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**404**](#error-404), [**505**](#error-505).<br/>
<br/>
##### *1.9. Метод изменения пользовательских данных*
<a name="func-changeUserInfo">changeUserInfo</a> - **http://oll.tv/ispAPI/changeUserInfo** <br/>
Провайдер может менять данные только привязанным к нему пользователям.<br/>
Метод принимает следующие параметры, из которых первый – обязательный:<br/>

<pre>
    <b>account</b> или <b>email</b> или <b>id</b> или <b>ds_account</b>
    <b>birth_date</b> (допускаются форматы YYYY-MM-DD или DD.MM.YYYY)
    <b>gender</b> (значения M или F, по-умолчанию: M)
    <b>password</b>
    <b>firstname</b>
    <b>lastname</b>
    <b>phone</b>
    <b>region</b>
    <b>index</b> (почтовый индекс или другой идентификатор региональной привязки абонента)
</pre>

Не возвращает ничего кроме статуса.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**404**](#error-404), [**505**](#error-505).<br/>
<br/>
##### *1.10. Метод сброса пароля родительского контроля*
<a name="func-resetParentControl">resetParentControl</a> - **http://oll.tv/ispAPI/resetParentControl** <br/>
Принимает один обязательный параметр:<br/>

<pre>
    <b>account</b> или <b>email</b> или <b>id</b> или <b>ds_account</b>
</pre>

Не возвращает ничего кроме статуса.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**404**](#error-404), [**505**](#error-505).<br/>
<br/>
#### **2. Работа с подписками**
##### *2.1. Метод включения пользователю бандл-подписки*
<a name="func-enableBundle">enableBundle</a> - **http://oll.tv/ispAPI/enableBundle** <br/>
Принимает три параметра:<br/>

<pre>
    <b>account</b> или <b>email</b> или <b>id</b> или <b>ds_account</b>
    <b>sub_id</b>
    <b>type</b>
</pre>

Первый параметр обязателен. <br/>
Параметр *sub_id* принимает идентификатор подписки, которую необходимо включить пользователю; необходим в случае если провайдеру доступно более одного варианта бандл-подписки. Подписка на доступ с доп. экрана не может быть включена раньше подписки на основную услугу.<br/>
Параметр *type* предназначен для передачи уточняющей информации об активации и может принимать одно из следующих значений:<br/>

<pre>
    <b>subs_free_device</b> &mdash; Новый контракт - 24 мес и оборудование за 1 грн
    <b>subs_buy_device</b> &mdash; Новый контракт - покупка оборудования
    <b>subs_rent_device</b> &mdash; Новый контракт - аренда оборудования
    <b>subs_no_device</b> &mdash; Новый контаркт - без оборудования
    <b>subs_renew</b> &mdash; Восстановление текущего контракта
</pre>

В случае удачи возвращает строку, содержащую код привязки дополнительных устройств(если такая возможность входит в бандл-подписку) или 1, в противном — 0.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**404**](#error-404), [**407**](#error-407), [**408**](#error-408), [**505**](#error-505), [**506**](#error-506).<br/>
<br/>
##### *2.2. Метод выключения у пользователя бандл-подписки*
<a name="func-disableBundle">disableBundle</a> - **http://oll.tv/ispAPI/disableBundle** <br/>
Принимает три параметра:<br/>

<pre>
    <b>account</b> или <b>email</b> или <b>id</b> или <b>ds_account</b>
    <b>sub_id</b>
    <b>type</b>
</pre>

Первый параметр обязателен. <br/>
Параметр *sub_id* принимает идентификатор подписки, которую необходимо выключить пользователю; необходим в случае если провайдеру доступно более одного варианта бандл-подписки. Подписка на основную услугу не может быть отключена при наличии активных подписок на доп. Экраны.<br/>
Параметр type предназначен для передачи уточняющей информации о деактивации и может принимать одно из следующих значений:<br/>

<pre>
    <b>subs_break_contract</b> &mdash; Разрыв договора
    <b>subs_negative_balance</b> &mdash; Отрицательный баланс
    <b>subs_malfunction</b> &mdash; Технические неполадки
    <b>subs_vacation</b> &mdash; Каникулы
</pre>

Все пользовательские устройства, которые были привязаны с помощью кода привязки, который был выдан по данной подписке, будут автоматически отвязаны от пользователя.<br/>
В случае удачи возвращает 1, в противном — 0.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**404**](#error-404), [**407**](#error-407), [**408**](#error-408), [**504**](#error-504), [**505**](#error-505).<br/>
<br/>
##### *2.3. Метод проверки состояния бандл-подписки у пользователя*
<a name="func-checkBundle">checkBundle</a> - **http://oll.tv/ispAPI/checkBundle** <br/>
Принимает два параметра:<br/>

<pre>
    <b>account</b> или <b>email</b> или <b>id</b> или <b>ds_account</b>
    <b>sub_id</b>
</pre>

Первый параметр обязателен.<br/>
Параметр *sub_id* принимает идентификатор подписки, по которой необходимо выполнить проверку; необходим в случае если провайдеру доступно более одного <br/>варианта бандл-подписки. 
В случае если подписка активна возвращает 1, в противном — 0.<br/>
Для получения более подробной информации используйте метод *getUserInfo* (1.8).<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**404**](#error-404), [**407**](#error-407), [**505**](#error-505).<br/>
<br/>
##### *2.4. Метод смены у пользователя бандл-подписки*
<a name="func-changeBundle">changeBundle</a> - **http://oll.tv/ispAPI/changeBundle** <br/>
Принимает три обязательных параметра:<br/>

<pre>
    <b>account</b> или <b>email</b> или <b>id</b> или <b>ds_account</b>
    <b>old_sub_id</b>
    <b>new_sub_id</b>
</pre>

Параметр *old_sub_id* принимает идентификатор подписки, которая активна у пользователя в данный момент, а *new_sub_id* — идентификатор подписки, на которую осуществляет смена. Смену можно производить только с подписками на основной тарифный план, при этом активные доп. экраны будут автоматически перенесены на новый основной тарифный план с сохранением кодов привязки.<br/>
В случае, если у пользователя неактивна подписка, идентификатор которой передается в параметре *old_sub_id*, возвращает 0.<br/>
В случае, если подписка, идентификатор которой передается в параметре *new_sub_id*, уже активна возвращает 1.<br/>
Не возвращает ничего кроме статуса.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200), [**404**](#error-404), [**407**](#error-407), [**504**](#error-504), [**505**](#error-505).<br/>
<br/>
##### *2.4. Метод получения списка активных подписок провайдера за период*
<a name="func-getAllPurchases">getAllPurchases</a> - **http://oll.tv/ispAPI/getAllPurchases** <br/>
Принимает два параметра:<br/>

<pre>
    <b>start_date</b>
    <b>page</b>
</pre>

Параметры *start_date* – начло отчетного периода, обязателен. Параметр *page* – номер страницы, каждая страница возвращает до 10000 *puchases*, не обязателен.<br/>
Структура возвращаемого *JSON*:<br/>

```javascript
{
    data: {
        purchases: [
            0: {
                TransactionID:
                SubscriberDSID: 
                SubscriberProviderID: 
                TariffName: 
                TariffID: 
                PurchaseDate: 
                StartDate: 
                ExpirationDate: 
                StartOfReportingPeriod: 
                EndOfReportingPeriod: 
                RetailPrice: 
                ProviderPrice: 
                DaysWorkBundle
            }
            ...
        ]
        Count: 
        DaysInMonth: 
        ProviderID: 
        ProviderName: 
        Page: 
    }
    status: 0
}
```

Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200).<br/>
<br/>
#### **3. Работа с устройствами**
##### *3.1. Метод добавления и привязки нового устройства пользователю*
<a name="func-addDevice">addDevice</a> - **http://oll.tv/ispAPI/addDevice** <br/>
Принимает следующие параметры: <br/>

<pre>
    <b>account</b>
    <b>serial_number</b> &mdash; серийный номер устройства
    <b>mac</b> &mdash; mac-адрес устройства
    <b>device_type</b> &mdash; тип устройства (например: stb, dune, smarttv, lge, samsung, ipad и т.д.)
    <b>device_model</b> &mdash; модель устройства
    <b>binding_code</b> &mdash; код привязки устройства, выданный во время активации подписки для доступа с доп. экрана
    <b>type</b>
</pre>

Первые три параметра обязательны. <br/>
Из параметров *mac* и *serial_number* обязателен один любой, но желательно использование обоих вместе.<br/>
Параметр *binding_code* обязателен для провайдеров, которые работают с подписками для доступа с доп. устройств.<br/>
Параметр *type* предназначен для передачи уточняющей информации об привязке и может принимать одно из следующих значений:<br/>

<pre>
    <b>device_free</b> &mdash; Новый контракт - 24 мес и оборудование за 1 грн
    <b>device_buy</b> &mdash; Новый контракт - покупка оборудования
    <b>device_rent</b> &mdash; Новый контракт - аренда оборудования
    <b>device_change</b> &mdash; Сервисная замена текущего оборудования
</pre>

Не возвращает ничего кроме статуса.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**119**](#error-119), [**200**](#error-200), [**203**](#error-203), [**301**](#error-301), [**302**](#error-302), [**303**](#error-303), [**304**](#error-304), [**305**](#error-305), [**404**](#error-404), [**405**](#error-405), [**505**](#error-505).<br/>
<br/>
##### *3.2. Метод отвязки существующего устройства от пользователя*
<a name="func-delDevice">delDevice</a> - **http://oll.tv/ispAPI/delDevice** <br/>
Принимает следующие параметры: <br/>

<pre>
    <b>account</b>
    <b>mac</b> &mdash; mac-адрес устройства
    <b>serial_number</b> &mdash; серийный номер устройства
    <b>type</b>
</pre>

Из параметров *mac* и *serial_number* обязателен один любой, но желательно использование обоих вместе. <br/>
Если передается параметр *account* – перед удалением устройства будет произведена проверка на то, что это устройство привязано именно к этому пользователю.<br/>
Параметр type предназначен для передачи уточняющей информации об отвязке и может принимать одно из следующих значений:<br/>

<pre>
    <b>device_break_contract</b> &mdash; Окончание контракта
    <b>device_change</b> &mdash; Сервисная проблема оборудования
</pre>

Не возвращает ничего кроме статуса.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**117**](#error-117), [**200**](#error-200), [**203**](#error-203), [**406**](#error-406), [**501**](#error-501).<br/>
<br/>
##### *3.3. Метод проверки существования устройства в БД oll.tv*
<a name="func-deviceExists">deviceExists</a> - **http://oll.tv/ispAPI/deviceExists** <br/>
Принимает следующие параметры:<br/>

<pre>
    <b>mac</b> &mdash; mac-адрес устройства
    <b>serial_number</b> &mdash; серийный номер устройства
</pre>

Обязателен один любой параметр, но желательно использование обоих вместе. <br/>
Возвращает объект с информацией по устройству, если оно было найдено, или же 0 в противном случае.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200).<br/>
<br/>
##### *3.4. Метод получения списка устройств*
<a name="func-getDeviceList">getDeviceList</a> - **http://oll.tv/ispAPI/getDeviceList** <br/>
Принимает следующие необязательные параметры:<br/>

<pre>
    <b>account</b> или <b>email</b>
    <b>offset</b>
    <b>limit</b> (не больше 1000, по умолчанию равно 1000)
</pre>

Возвращает список устройств провайдера с указанием дополнительных данных устройства и пользователя.<br/>
Возможные коды ошибок: [**109**](#error-109), [**110**](#error-110), [**200**](#error-200).<br/>
<br/>
<br/>
## Перечень возможных ошибок

| **Status** | **Message** | **Описание** | **Методы** |
| ------ | ------- | -------- | ------ |
|  <a name="error-109">109</a>   | Hash expired | Время действия хеша истекло или хеш не верен | Все, кроме  [**auth**](#func-auth) |
|  <a name="error-110">110</a>   | Authorization missed | Хеш не указан | Все, кроме  [**auth**](#func-auth) |
|  <a name="error-111">111</a>   | Auth failed | Неверный логин или пароль | [**auth**](#func-auth) |
|  <a name="error-112">112</a>   | Login empty | Не указан логин | [**auth**](#func-auth) |
|  <a name="error-113">113</a>   | Password empty | Не указан пароль | [**auth**](#func-auth) |
|  <a name="error-115">115</a>   | Email already exists | Указанный имейл уже есть в БД | [**addUser**](#func-addUser) |
|  <a name="error-116">116</a>   | Email validation failed | Формат указанного имейла неверен | [**addUser**](#func-addUser) |
|  <a name="error-117">117</a>   | Result user account does not match provided | Не указан аккаунт или он не совпадает с аккаунтом на который подвязано устройство | [**delDevice**](#func-delDevice) |
|  <a name="error-119">119</a>   | Device with provided mac or/and serial number already exist | Устройство с указанным мак-адресом и/или серийным номером уже присуствует в БД и за кем-то закреплено | [**addDevice**](#func-addDevice) |
|  <a name="error-120">120</a>   | Wrong date format | Неверный формат даты | [**addUser**](#func-addUser) |
|  <a name="error-200">200</a>   | Required fields missed | Остутствуют необходимые параметры | Все, кроме  [**auth**](#func-auth) |
|  <a name="error-201">201</a>   | Field email is required | Отсутствует необходимый параметр *email* | [**changeAccount**](#func-changeAccount)<br/>[**changeEmail**](#func-changeEmail)<br/>[**emailExists**](#func-emailExists) |
|  <a name="error-203">203</a>   | Neither mac nor serial_number was found in your request | Отсутствуют параметры *mac* и *serial_number* | [**addDevice**](#func-addDevice)<br/>[**delDevice**](#func-delDevice) |
|  <a name="error-205">205</a>   | Field new_email is required | Отсутствует необходимый параметр *new_email* | [**changeEmail**](#func-changeEmail) |
|  <a name="error-301">301</a>   | Registration failed. Contact technical support | Ошибка добавления устройства пользователю или регистрации нового пользователя | [**addDevice**](#func-addDevice)<br/>[**addUser**](#func-addUser) |
|  <a name="error-302">302</a>   | Wrong MAC address | Неверный формат мак-адреса | [**addDevice**](#func-addDevice) |
|  <a name="error-303">303</a>   | Wrong Serial number | Неверный формат серийного номера | [**addDevice**](#func-addDevice) |
|  <a name="error-304">304</a>   | Invalid binding code | Неверный код привязки устройства | [**addDevice**](#func-addDevice) |
|  <a name="error-305">305</a>   | No devices can be binded by this code | Достигнут лимит кол-ва устройств, которые можно привязать по указанному коду привязки | [**addDevice**](#func-addDevice) |
|  <a name="error-404">404</a>   | Account not found | Пользователь не найден в БД | [**addDevice**](#func-addDevice)<br/>[**changeAccount**](#func-changeAccount)<br/>[**changeBundle**](#func-changeBundle)<br/>[**changeEmail**](#func-changeEmail)<br/>[**changeUserInfo**](#func-changeUserInfo)<br/>[**checkBundle**](#func-checkBundle)<br/>[**deleteAccount**](#func-deleteAccount)<br/>[**disableBundle**](#func-disableBundle)<br/>[**enableBundle**](#func-enableBundle)<br/>[**getUserInfo**](#func-getUserInfo)<br/>[**resetParentControl**](#func-resetParentControl) |
|  <a name="error-405">405</a>   | Not eligible device_type | Недопустимое значение в параметре device_type | [**addDevice**](#func-addDevice) |
|  <a name="error-406">406</a>   | Device not found in our DB | Устройство не найдено в БД или оно отвязано от пользователя | [**delDevice**](#func-delDevice) |
|  <a name="error-407">407</a>   | Subscription not found | Подписка, указанная в параметрах *sub_id*, *new_sub_id* или *old_sub_id*, не найдена | [**changeBundle**](#func-changeBundle)<br/>[**checkBundle**](#func-checkBundle)<br/>[**disableBundle**](#func-disableBundle)<br/>[**enableBundle**](#func-enableBundle) |
|  <a name="error-408">408</a>   | Subscription order violation | Нарушение очерёдности отключения или включения услуги согласно подписке | [**disableBundle**](#func-disableBundle)<br/>[**enableBundle**](#func-enableBundle) |
|  <a name="error-501">501</a>   | Access denied | Устройство привязано к пользователю другого провайдера | [**delDevice**](#func-delDevice) |
|  <a name="error-504">504</a>   | User already deactivated | Услуга была уже выключена ранее | [**changeBundle**](#func-changeBundle)<br/>[**disableBundle**](#func-disableBundle) |
|  <a name="error-505">505</a>   | User is attached to another operator | Пользователь привязан к другому провайдеру | [**addDevice**](#func-addDevice)<br/>[**changeAccount**](#func-changeAccount)<br/>[**changeBundle**](#func-changeBundle)<br/>[**changeEmail**](#func-changeEmail)<br/>[**changeUserInfo**](#func-changeUserInfo)<br/>[**checkBundle**](#func-checkBundle)<br/>[**deleteAccount**](#func-deleteAccount)<br/>[**disableBundle**](#func-disableBundle)<br/>[**enableBundle**](#func-enableBundle)<br/>[**getUserInfo**](#func-getUserInfo)<br/>[**resetParentControl**](#func-resetParentControl) |
|  <a name="error-506">506</a>   | Account is not active | Аккаунт пользователя не активен | [**enableBundle**](#func-enableBundle) |